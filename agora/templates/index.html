{% extends "base.html" %}
{% load humanize %}

{% block title %}
    Home - Agora
{% endblock title %}

{% block content %}
    <div class="hero bg-base-200 py-16 lg:py-32">
        <div class="hero-content max-w-5xl mx-auto flex-col lg:flex-row-reverse gap-8 lg:gap-16">
            <div class="text-center lg:text-left">
                {% if not has_signed_up %}
                    <h1 class="text-5xl font-bold">Join the Waitlist</h1>
                    <p class="py-6 text-balance">
                        If you're here you're probably interested in a voluntary digital ID. We're inviting people in small batches as we build the product so enter your email and we'll notify you when it's your turn to join.
                    </p>
                {% else %}
                    <h1 class="text-5xl font-bold">Thank you</h1>
                    <p class="py-6 text-balance">You're on the waitlist! We'll notify you when it's your turn to join.</p>
                {% endif %}
            </div>
            <div class="w-full max-w-sm shrink-0 flex flex-col gap-4">
                {% if has_signed_up %}
                    <div class="card bg-base-100 w-full shadow-2xl">
                        <div class="card-body flex flex-col gap-4">
                            <div class="text-center">
                                <div class="text-6xl mb-4">ðŸŽ‰</div>
                                <h3 class="text-xl font-bold mb-2">You're on the waitlist!</h3>
                                <a href="{% url 'signup_status' signup_id=signup_id %}"
                                   class="btn btn-primary">View Your Status</a>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="card bg-base-100 w-full shadow-2xl">
                        <div class="card-body flex flex-col gap-4">
                            <form method="post"
                                  action="{% url 'signup' %}"
                                  aria-label="Waitlist signup form">
                                {% csrf_token %}
                                <fieldset class="fieldset">
                                    <legend class="sr-only">Waitlist signup form</legend>
                                    <label class="label">{{ form.email.label_tag }}</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="label">
                                            <span class="label-text-alt text-error">{{ form.email.errors.0 }}</span>
                                        </div>
                                    {% endif %}
                                    <div class="cf-turnstile w-full" data-sitekey="0x4AAAAAAB0bBgh__cs3wnca"></div>
                                    <button class="btn btn-primary mt-4">Join Waitlist</button>
                                </fieldset>
                            </form>

                            <p class="text-sm text-base-content/70">
                                By joining the waitlist, you agree to our <a href="{% url 'home' %}" class="link link-primary">privacy policy</a>.
                            </p>
                        </div>
                    </div>
                    {% if waiting_list_count > 10 %}
                        <div class="flex items-center gap-2 justify-center">
                            <span class="text-sm text-base-content/70">
                                <i data-lucide="circle-user" aria-hidden="true" class="w-8 h-8"></i>
                            </span>
                            <p class="text-sm">Join {{ waiting_list_count|intcomma }}+ others on the waitlist</p>
                        </div>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    <div class="container max-w-2xl mx-auto py-8 px-4 lg:py-16 flex flex-col gap-8">
        <h2 class="text-2xl font-bold">What is Agora?</h2>
        <p>
            The future of the internet requires trust, and that starts with identity. Agora is a Swiss non-profit creating a privacy-respecting alternative to today's log-in methods.
        </p>
        <p>
            By verifying your identity with us, you can prove you are a real person online without sharing sensitive information with every website you visit. Our service helps prevent fraud and provides a trusted online presence while protecting your privacy.
        </p>
    </div>
    <div class="container max-w-2xl mx-auto px-4 py-8 lg:py-12">{% include "includes/faq.html" %}</div>
{% endblock content %}

{% block bodyEndScripts %}
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js"
            async
            defer></script>
{% endblock bodyEndScripts %}
